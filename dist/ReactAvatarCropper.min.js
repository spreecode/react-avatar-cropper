!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("semantic-ui-react"),require("react")):"function"==typeof define&&define.amd?define(["semantic-ui-react","react"],t):"object"==typeof exports?exports.ReactAvatarCropper=t(require("semantic-ui-react"),require("react")):e.ReactAvatarCropper=t(e["semantic-ui-react"],e.react)}(window,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";function r(e){return!!e.match(r.regex)}Object.defineProperty(t,"__esModule",{value:!0}),t.isDataURL=r,r.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;t.resetOrientation=function(e,t,n){var r=new Image;r.onload=function(){var e=r.width,o=r.height,a=document.createElement("canvas"),i=a.getContext("2d");switch(4<t&&t<9?(a.width=o,a.height=e):(a.width=e,a.height=o),t){case 2:i.transform(-1,0,0,1,e,0);break;case 3:i.transform(-1,0,0,-1,e,o);break;case 4:i.transform(1,0,0,-1,0,o);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,o,0);break;case 7:i.transform(0,-1,-1,0,o,e);break;case 8:i.transform(0,-1,1,0,0,e)}i.drawImage(r,0,0),n(a.toDataURL())},r.src=e},t.getOrientation=function(e,t){var n=new FileReader;n.onload=function(e){var n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);for(var r=n.byteLength,o=2;o<r;){if(n.getUint16(o+2,!1)<=8)return t(-1);var a=n.getUint16(o,!1);if(o+=2,65505==a){if(1165519206!=n.getUint32(o+=2,!1))return t(-1);var i=18761==n.getUint16(o+=6,!1);o+=n.getUint32(o+4,i);var s=n.getUint16(o,i);o+=2;for(var u=0;u<s;u++)if(274==n.getUint16(o+12*u,i))return t(n.getUint16(o+12*u+8,i))}else{if(65280!=(65280&a))break;o+=n.getUint16(o,!1)}}return t(-1)},n.readAsArrayBuffer(e)}},function(t,n){t.exports=e},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=n(3);function o(){}e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){e.exports=n(4)()},function(e,n){e.exports=t},function(e,t){var n={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},o=r(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),a=r(function(){return document.head||document.getElementsByTagName("head")[0]}),i=null,s=0;function u(e,t){for(var r=0;r<e.length;r++){var o=e[r],a=n[o.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](o.parts[i]);for(;i<o.parts.length;i++)a.parts.push(d(o.parts[i],t))}else{var s=[];for(i=0;i<o.parts.length;i++)s.push(d(o.parts[i],t));n[o.id]={id:o.id,refs:1,parts:s}}}}function p(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],a=o[0],i={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(i):t.push(n[a]={id:a,parts:[i]})}return t}function c(){var e=document.createElement("style"),t=a();return e.type="text/css",t.appendChild(e),e}function d(e,t){var n,r,o;if(t.singleton){var u=s++;n=i||(i=c()),r=h.bind(null,n,u,!1),o=h.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(){var e=document.createElement("link"),t=a();return e.rel="stylesheet",t.appendChild(e),e}(),r=function(e,t){var n=t.css,r=(t.media,t.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,n),o=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=c(),r=function(e,t){var n=t.css,r=t.media;t.sourceMap;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){n.parentNode.removeChild(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(t=t||{}).singleton&&(t.singleton=o());var r=p(e);return u(r,t),function(e){for(var o=[],a=0;a<r.length;a++){var i=r[a];(s=n[i.id]).refs--,o.push(s)}e&&u(p(e),t);for(a=0;a<o.length;a++){var s;if(0===(s=o[a]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete n[s.id]}}}};var l=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function h(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<t.length;o++){var i=t[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t,n){(e.exports=n(8)()).push([e.i,".AvatarCropper-base {\n  text-align: center;\n}\n\n.AvatarCropper-base input[type=range] {\n  display: inline-block;\n}\n\n.AvatarCropper-base input[type=range] {\n  /*removes default webkit styles*/\n  -webkit-appearance: none;\n  /*fix for FF unable to apply focus style bug */\n  padding: 20px 0;\n  border: 1px solid white;\n\n  /*required for proper track sizing in FF*/\n  width: 400px;\n}\n.AvatarCropper-base input[type=range]::-webkit-slider-runnable-track {\n  width: 400px;\n  height: 5px;\n  background: #ddd;\n  border: none;\n  border-radius: 3px;\n}\n.AvatarCropper-base input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  border: none;\n  height: 16px;\n  width: 16px;\n  border-radius: 50%;\n  background: #454545;\n  margin-top: -4px;\n}\n.AvatarCropper-base input[type=range]:focus {\n  outline: none;\n}\n.AvatarCropper-base input[type=range]:focus::-webkit-slider-runnable-track {\n  background: #ccc;\n}\n\n.AvatarCropper-base input[type=range]::-moz-range-track {\n  width: 400px;\n  height: 5px;\n  background: #ddd;\n  border: none;\n  border-radius: 3px;\n}\n.AvatarCropper-base input[type=range]::-moz-range-thumb {\n  border: none;\n  height: 16px;\n  width: 16px;\n  border-radius: 50%;\n  background: #454545;\n}\n\n/*hide the outline behind the border*/\n.AvatarCropper-base input[type=range]:-moz-focusring{\n  outline: 1px solid white;\n  outline-offset: -1px;\n}\n\n.AvatarCropper-base input[type=range]::-ms-track {\n  width: 400px;\n  height: 5px;\n\n  /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */\n  background: transparent;\n\n  /*leave room for the larger thumb to overflow with a transparent border */\n  border-color: transparent;\n  border-width: 6px 0;\n\n  /*remove default tick marks*/\n  color: transparent;\n}\n.AvatarCropper-base input[type=range]::-ms-fill-lower {\n  background: #777;\n  border-radius: 10px;\n}\n.AvatarCropper-base input[type=range]::-ms-fill-upper {\n  background: #ddd;\n  border-radius: 10px;\n}\n.AvatarCropper-base input[type=range]::-ms-thumb {\n  border: none;\n  height: 16px;\n  width: 16px;\n  border-radius: 50%;\n  background: #454545;\n}\n.AvatarCropper-base input[type=range]:focus::-ms-fill-lower {\n  background: #888;\n}\n.AvatarCropper-base input[type=range]:focus::-ms-fill-upper {\n  background: #ccc;\n}\n.AvatarCropper-base canvas {\n  cursor: move;\n}\n\n.AvatarCropper-canvas {\n  padding: 30px 0;\n}\n",""])},function(e,t,n){var r=n(9);"string"==typeof r&&(r=[[e.i,r,""]]);n(7)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(10);var a=n(6),i=d(a),s=d(n(5)),u=n(2),p=n(1),c=d(n(0));function d(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e,t,n){(0,c.default)(!isNaN(parseInt(e[t])),"Invalid "+t+" '"+e.size+"' sent to '"+n+"'. Requires an\n    int or string capable of conversion to an int.\n    Check the render method of == '"+n+"'. == ")},g=function(e){function t(){l(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fitImageToCanvas=function(t,n){var r,o;e.props.height/e.props.width>n/t?o=t*((r=e.props.height)/n):r=n*((o=e.props.width)/t);return{width:o,height:r}},e.prepareImage=function(t){var n=new Image;(0,p.isDataURL)(t)||(n.crossOrigin="anonymous"),n.onload=function(){var t=e.fitImageToCanvas(n.width,n.height);t.resource=n,t.x=0,t.y=0,e.setState({dragging:!1,image:t,preview:e.toDataURL()})},n.src=t},e.mouseDownListener=function(t){e.setState({dragging:!0,mouse:{x:null,y:null}})},e.preventSelection=function(t){if(e.state.dragging)return t.preventDefault(),!1},e.mouseUpListener=function(t){e.setState({dragging:!1,preview:e.toDataURL()})},e.mouseMoveListener=function(t){if(e.state.dragging){var n=t.clientX||t.touches[0].clientX,r=t.clientY||t.touches[0].clientY,o=e.state.image.x,a=e.state.image.y,i=e.state.image;if(e.state.mouse.x&&e.state.mouse.y){var s=e.state.mouse.x-n,u=e.state.mouse.y-r,p=e.boundedCoords(o,a,s,u);i.x=p.x,i.y=p.y}e.setState({mouse:{x:n,y:r}})}},e.boundedCoords=function(t,n,r,o){var a=t-r,i=n-o,s=e.state.image.width*e.state.zoom,u=(s-e.state.image.width)/2,p=(e.state.image.x,e.props.width);t=a-u>0?u:a<-s+p?p-s:a;var c=e.state.image.height*e.state.zoom,d=(c-e.state.image.height)/2,l=(e.state.image.y,e.props.height);return{x:t,y:n=i-d>0?d:i<-c+l?l-c:i}},e.addImageToCanvasWithOriginalSize=function(t,n,r,o){if(o.resource){var a=e.state.zoom,i=o.resource;t.save(),t.globalCompositeOperation="destination-over";var s=void 0,u=void 0;if(r/n>i.height/i.width){s=r;var p=r/i.height;u=i.width*p}else{u=n;var c=n/i.width;s=i.height*c}var d=u*a,l=s*a,h=n/e.props.width,f=r/e.props.height,m=o.x*h-(d-u)/2,g=o.y*f-(l-s)/2;m=Math.min(m,0),g=l+(g=Math.min(g,0))>=r?g:g+(r-(l+g)),m=d+m>=n?m:m+(n-(d+m)),t.drawImage(i,m,g,u*a,s*a),t.restore()}},e.getOriginalCroppedImage=function(){return new Promise(function(t,n){var r=e.state.image,o=document.createElement("canvas"),a=o.getContext("2d"),i=e.props.height,s=e.props.width/i,u=void 0,p=void 0;r.resource.width>r.resource.height?u=(p=r.resource.height)*s:p=(u=r.resource.width)/s,o.width=u/e.state.zoom,o.height=p/e.state.zoom,e.addImageToCanvasWithOriginalSize(a,o.width,o.height,r),o.toBlob(function(n){var r=new File([n],e.props.file.name),a=o.toDataURL("image/jpeg",.9);t({url:a,file:r})},"image/jpeg",.9)})},e.addImageToCanvas=function(t,n){if(n.resource){t.save(),t.globalCompositeOperation="destination-over";var r=e.state.image.width*e.state.zoom,o=e.state.image.height*e.state.zoom,a=n.x-(r-e.state.image.width)/2,i=n.y-(o-e.state.image.height)/2;a=Math.min(a,0),i=o+(i=Math.min(i,0))>=e.props.height?i:i+(e.props.height-(o+i)),a=r+a>=e.props.width?a:a+(e.props.width-(r+a)),t.drawImage(n.resource,a,i,n.width*e.state.zoom,n.height*e.state.zoom),t.restore()}},e.toDataURL=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.props.width,t.height=e.props.height,e.addImageToCanvas(n,{resource:e.state.image.resource,x:e.state.image.x,y:e.state.image.y,height:e.state.image.height,width:e.state.image.width}),t.toDataURL()},e.getCroppedImage=function(){return new Promise(function(t,n){var r=document.createElement("canvas"),o=r.getContext("2d");r.width=e.props.width,r.height=e.props.height,e.addImageToCanvas(o,{resource:e.state.image.resource,x:e.state.image.x,y:e.state.image.y,height:e.state.image.height,width:e.state.image.width}),r.toBlob(function(n){var o=new File([n],e.props.file.name),a=r.toDataURL("image/jpeg",.9);t({file:o,url:a})},"image/jpeg",.9)})},e.handleCrop=function(){e.state.image;var t=e.props,n=t.isOriginalSize,r=t.onCrop;n?e.getOriginalCroppedImage().then(function(e){var t=e.url,n=e.file;return r(t,n)}):e.getCroppedImage().then(function(e){var t=e.url,n=e.file;return r(t,n)})},e.handleZoomUpdate=function(){e.setState({zoom:e.zoom.value})},e.state={dragging:!1,image:{},mouse:{x:null,y:null},preview:null,zoom:1},e.listeners=[],e}return f(t,a.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;this.canvas.getContext("2d");this.prepareImage(this.props.image),this.listeners={mousemove:function(t){return e.mouseMoveListener(t)},mouseup:function(t){return e.mouseUpListener(t)},mousedown:function(t){return e.mouseDownListener(t)}},window.addEventListener("mousemove",this.listeners.mousemove,!1),window.addEventListener("mouseup",this.listeners.mouseup,!1),this.canvas.addEventListener("mousedown",this.listeners.mousedown,!1),window.addEventListener("touchmove",this.listeners.mousemove,!1),window.addEventListener("touchend",this.listeners.mouseup,!1),this.canvas.addEventListener("touchstart",this.listeners.mousedown,!1),document.onselectstart=function(t){return e.preventSelection(t)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.listeners.mousemove),window.removeEventListener("mouseup",this.listeners.mouseup),this.canvas.removeEventListener("mousedown",this.listeners.mousedown),window.removeEventListener("touchmove",this.listeners.mousemove,!1),window.removeEventListener("touchend",this.listeners.mouseup,!1),this.canvas.removeEventListener("touchstart",this.listeners.mousedown,!1)}},{key:"componentDidUpdate",value:function(){var e=this.canvas.getContext("2d");e.clearRect(0,0,this.props.width,this.props.height),this.addImageToCanvas(e,this.state.image)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"AvatarCropper-canvas"},i.default.createElement("div",{className:"row"},i.default.createElement("canvas",{ref:function(t){return e.canvas=t},width:this.props.width,height:this.props.height})),i.default.createElement("div",{className:"row"},i.default.createElement("input",{type:"range",name:"zoom",ref:function(t){return e.zoom=t},onChange:this.handleZoomUpdate,style:{width:this.props.width},min:"1",max:"3",step:"0.01",defaultValue:"1"})),i.default.createElement("div",{className:"modal-footer"},i.default.createElement(u.Button,{onClick:this.props.onRequestHide},this.props.closeButtonCopy),i.default.createElement(u.Button,{primary:!0,onClick:this.handleCrop.bind(this)},this.props.cropButtonCopy)))}}]),t}();g.propTypes={image:s.default.string.isRequired,file:s.default.object.isRequired,width:m,height:m,zoom:m,isOriginalSize:s.default.bool},g.defaultProps={width:400,height:400,zoom:1,isOriginalSize:!0};var v=function(e){function t(){l(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.prepareImage=function(){var t=new FileReader,n=e.props.image;n&&(t.addEventListener("load",function(){(0,p.getOrientation)(n,function(n){return(0,p.resetOrientation)(t.result,n,function(t){return e.setState({imageUrl:t})})})},!1),t.readAsDataURL(n))},e.state={imageUrl:null},e}return f(t,i.default.Component),o(t,[{key:"componentWillMount",value:function(){this.prepareImage()}},{key:"componentWillReceiveProps",value:function(e){this.props.image!==e.image&&this.prepareImage()}},{key:"render",value:function(){var e=this.props.modalOptions,t=e.header,n=(e.content,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["header","content"]));return i.default.createElement(u.Modal,r({open:this.props.cropperOpen,onClose:this.props.onRequestHide},n),t&&i.default.createElement(u.Modal.Header,null,t),i.default.createElement("div",{className:"modal-body"},i.default.createElement("div",{className:"AvatarCropper-base"},this.state.imageUrl&&i.default.createElement(g,{image:this.state.imageUrl,file:this.props.image,width:this.props.width,height:this.props.height,onCrop:this.props.onCrop,onRequestHide:this.props.onRequestHide,closeButtonCopy:this.props.closeButtonCopy,cropButtonCopy:this.props.cropButtonCopy,isOriginalSize:this.props.isOriginalSize}))))}}]),t}();v.propTypes={image:s.default.object.isRequired,onCrop:s.default.func.isRequired,isOriginalSize:s.default.bool,closeButtonCopy:s.default.string,cropButtonCopy:s.default.string,width:m,height:m,onRequestHide:s.default.func.isRequired,modalOptions:s.default.object},v.defaultProps={width:400,height:400,closeButtonCopy:"Close",cropButtonCopy:"Crop and Save",modalOptions:{}},t.default=v},function(e,t,n){e.exports=n(11)}])});